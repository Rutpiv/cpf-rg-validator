<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" class="scroll-smooth">
  <head>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .tokyo-bg {
        background-color: #1a1b26;
      }
      .tokyo-text {
        color: #a9b1d6;
      }
      .tokyo-cyan {
        color: #7dcfff;
      }
      .tokyo-pink {
        color: #f7768e;
      }
      .tokyo-purple {
        color: #bb9af7;
      }

      [x-cloak] {
        display: none !important;
      }
    </style>
  </head>
  <body class="tokyo-bg min-h-screen text-slate-100">
    <div
      class="container mx-auto p-4 max-w-4xl"
      x-data="{ activeTab: new URLSearchParams(window.location.search).get('modo') || 'single' }">
      <!-- Tabs -->
      <div class="flex space-x-2 mb-6 border-b border-slate-700">
        <button
          @click="activeTab = 'single'"
          :class="activeTab === 'single' ? 'border-b-2 border-cyan-400' : 'text-slate-400'"
          class="px-4 py-2 font-medium transition-colors">
          Validação Única
        </button>
        <button
          @click="activeTab = 'batch'"
          :class="activeTab === 'batch' ? 'border-b-2 border-cyan-400' : 'text-slate-400'"
          class="px-4 py-2 font-medium transition-colors">
          Validação em Lote
        </button>
      </div>

      <!-- Single Validation -->
      <div x-show="activeTab === 'single'" class="space-y-6">
        <form method="post" action="/validate" class="bg-slate-800 rounded-lg p-6 shadow-xl">
          <div class="flex gap-3">
            <input
              type="text"
              name="documento"
              th:value="${resultado?.documento}"
              class="w-full bg-slate-700 rounded-lg px-4 py-3 text-slate-100 focus:ring-2 focus:ring-cyan-400 focus:outline-none"
              placeholder="Digite o documento..." />
            <button
              type="submit"
              class="bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all">
              Validar
            </button>
          </div>
        </form>

        <div
          th:if="${resultado}"
          class="bg-slate-800 p-4 rounded-lg border-l-4"
          :class="${resultado.validado} ? 'border-cyan-400' : 'border-pink-400'">
          <div class="flex items-center gap-3">
            <span
              class="text-2xl"
              th:class="${resultado.validado} ? 'text-cyan-400' : 'text-pink-400'">
              [[ ${resultado.validado} ? '✅' : '❌' ]]
            </span>
            <span class="font-medium" th:text="${resultado.mensagem}"></span>
          </div>
        </div>
      </div>

      <!-- Batch Validation -->
      <div x-show="activeTab === 'batch'" class="space-y-6">
        <form method="post" action="/validate/batch" class="bg-slate-800 rounded-lg p-6 shadow-xl">
          <textarea
            name="documentos"
            class="w-full bg-slate-700 rounded-lg px-4 py-3 text-slate-100 mb-4 focus:ring-2 focus:ring-cyan-400 focus:outline-none h-48"
            placeholder="Cole os documentos (um por linha)..."></textarea>
          <button
            type="submit"
            class="bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all w-full">
            Validar Tudo
          </button>
        </form>

        <div th:if="${resultados}" class="bg-slate-800 rounded-lg overflow-hidden shadow-xl">
          <table class="w-full">
            <thead class="bg-slate-700 text-cyan-400">
              <tr>
                <th class="px-4 py-3 text-left">Documento</th>
                <th class="px-4 py-3 text-center">Status</th>
                <th class="px-4 py-3 text-left">Detalhes</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-600">
              <tr th:each="result : ${resultados}" class="hover:bg-slate-700/50 transition-colors">
                <td class="px-4 py-3" th:text="${result.documento}"></td>
                <td class="px-4 py-3 text-center">
                  <span th:class="${result.validado} ? 'text-cyan-400' : 'text-pink-400'">
                    [[ ${result.validado} ? '✓' : '✕' ]]
                  </span>
                </td>
                <td class="px-4 py-3 text-pink-400" th:text="${result.mensagem}"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/alpinejs" defer></script>
  </body>
</html>
